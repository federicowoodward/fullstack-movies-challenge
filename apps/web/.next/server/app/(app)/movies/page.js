(()=>{var e={};e.id=225,e.ids=[225],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},854:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(2835),s(8662),s(5886),s(7614);var r=s(1262),a=s(5317),l=s(918),n=s.n(l),o=s(3842),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let d=["",{children:["(app)",{children:["movies",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2835)),"C:\\Users\\Fede\\Desktop\\proyectos_activos\\fullstack-challenge\\apps\\web\\app\\(app)\\movies\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8662)),"C:\\Users\\Fede\\Desktop\\proyectos_activos\\fullstack-challenge\\apps\\web\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5886,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7614)),"C:\\Users\\Fede\\Desktop\\proyectos_activos\\fullstack-challenge\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5886,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Fede\\Desktop\\proyectos_activos\\fullstack-challenge\\apps\\web\\app\\(app)\\movies\\page.tsx"],u="/(app)/movies/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/movies/page",pathname:"/movies",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6584:(e,t,s)=>{Promise.resolve().then(s.bind(s,5563))},6416:(e,t,s)=>{Promise.resolve().then(s.bind(s,3845))},1840:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,8309,23)),Promise.resolve().then(s.t.bind(s,5964,23)),Promise.resolve().then(s.t.bind(s,6283,23)),Promise.resolve().then(s.t.bind(s,5999,23)),Promise.resolve().then(s.t.bind(s,8586,23)),Promise.resolve().then(s.t.bind(s,3437,23))},1291:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,8626,23))},5563:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var r=s(3109),a=s(8046),l=s.n(a),n=s(371);function o({data:e,columns:t,pageSize:s=10,emptyLabel:a="No records found"}){let[o,i]=(0,n.useState)(1),d=Math.max(1,Math.ceil(e.length/s)),c=(0,n.useMemo)(()=>{let t=(o-1)*s;return e.slice(t,t+s)},[e,o,s]),u=e=>{i(Math.min(Math.max(1,e),d))};return(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsx("tr",{children:t.map(e=>r.jsx("th",{className:l()("px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-600",e.className),children:e.header},e.key))})}),r.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:0===c.length?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length,className:"px-4 py-6 text-center text-sm text-slate-500",children:a})}):c.map((e,s)=>r.jsx("tr",{className:"hover:bg-slate-50",children:t.map(t=>{let s=e[t.key];return r.jsx("td",{className:l()("px-4 py-3 text-sm text-slate-800",t.className),children:t.render?t.render(e):String(s??"")},t.key)})},s))})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[(0,r.jsxs)("div",{children:["Page ",o," of ",d]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{className:"rounded border border-slate-200 px-3 py-1 hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>u(o-1),disabled:1===o,children:"Previous"}),r.jsx("button",{className:"rounded border border-slate-200 px-3 py-1 hover:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>u(o+1),disabled:o===d,children:"Next"})]})]})]})}var i=s(6027),d=s(4992);let c=(0,n.forwardRef)(({className:e,children:t,...s},a)=>r.jsx("select",{ref:a,className:l()("w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",e),...s,children:t}));function u({genre:e="",sort:t,onGenreChange:s,onSortChange:a,onReset:l}){return(0,r.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg border border-slate-200 bg-white p-4 shadow-sm md:flex-row md:items-end",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Genre"}),r.jsx(d.I,{value:e,onChange:e=>s(e.target.value),placeholder:"You must put the genre exactly as it looks in the list for result to be shown."})]}),(0,r.jsxs)("div",{className:"w-full md:w-48",children:[r.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Sort by"}),(0,r.jsxs)(c,{value:t??"",onChange:e=>a(e.target.value?e.target.value:void 0),children:[r.jsx("option",{value:"",children:"None"}),r.jsx("option",{value:"title",children:"Title"}),r.jsx("option",{value:"year",children:"Year"})]})]}),r.jsx("div",{className:"flex justify-end md:ml-auto",children:r.jsx(i.z,{type:"button",variant:"secondary",onClick:()=>l?.(),className:"w-full md:w-auto",children:"Reset"})})]})}c.displayName="Select";var m=s(9787),p=s(1971),h=s(911);let x=Array.from({length:5});function f(){let e=(0,p.useSearchParams)(),t=(0,p.useRouter)(),s=(0,p.usePathname)(),a=e.get("genre")??"",l=e.get("sort")??void 0,i=(0,n.useMemo)(()=>(0,m.tD)({genre:a||void 0,sort:l}),[a,l]),{data:d,error:c,isLoading:f}=(0,h.ZP)(i),b=(0,n.useCallback)((r,a)=>{let l=new URLSearchParams(e.toString());a&&a.length>0?l.set(r,a):l.delete(r);let n=l.toString();t.replace(n?`${s}?${n}`:s)},[s,t,e]),v=d?.data??[];return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Movies"}),r.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Search and filter through the catalog."})]})}),r.jsx(u,{genre:a,sort:l,onGenreChange:e=>b("genre",e),onSortChange:e=>b("sort",e??""),onReset:()=>t.replace(s)}),f?r.jsx("div",{className:"space-y-3",children:x.map((e,t)=>r.jsx("div",{className:"skeleton h-16 w-full"},t))}):c?r.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:c.message||"Unable to load movies"}):r.jsx(o,{data:v,emptyLabel:"No movies found",columns:[{key:"id",header:"ID",className:"w-16"},{key:"title",header:"Title"},{key:"genre",header:"Genre"},{key:"year",header:"Year",className:"w-24"},{key:"director",header:"Director",render:e=>e.director?.name??"�"},{key:"actors",header:"Actors",render:e=>e.actors.map(e=>e.name).join(", ")||"�"}]})]})}},3845:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>i});var r=s(3109),a=s(1637),l=s(911),n=s(9787);let o={fetcher:async e=>{let t=await (0,n.SC)(e);if(!t.ok){let e=await t.json().catch(()=>({})),s=Error(e?.message??"Request failed");throw s.status=t.status,s.info=e,s}return t.json()},revalidateOnFocus:!1,shouldRetryOnError:!1};function i({children:e}){return r.jsx(l.J$,{value:o,children:r.jsx(a.V,{children:e})})}},6027:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var r=s(3109),a=s(371),l=s(8046),n=s.n(l);let o={primary:"bg-primary text-white hover:bg-blue-600",secondary:"bg-slate-200 text-slate-900 hover:bg-slate-300",danger:"bg-danger text-white hover:bg-red-700"},i=(0,a.forwardRef)(({className:e,variant:t="primary",loading:s=!1,disabled:a,children:l,...i},d)=>(0,r.jsxs)("button",{ref:d,className:n()("inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium transition-colors",o[t],(a||s)&&"opacity-60 cursor-not-allowed",e),disabled:a||s,...i,children:[s&&r.jsx("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),l]}));i.displayName="Button"},4992:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var r=s(3109),a=s(371),l=s(8046),n=s.n(l);let o=(0,a.forwardRef)(({className:e,...t},s)=>r.jsx("input",{ref:s,className:n()("w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 placeholder-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",e),...t}));o.displayName="Input"},1637:(e,t,s)=>{"use strict";s.d(t,{V:()=>c,p:()=>u});var r=s(3109),a=s(8046),l=s.n(a),n=s(371),o=s(848);let i=(0,n.createContext)(void 0),d={info:"border-slate-200 bg-white text-slate-900",success:"border-green-200 bg-green-50 text-green-800",error:"border-red-200 bg-red-50 text-red-800"};function c({children:e}){let[t,s]=(0,n.useState)([]),a=(0,n.useCallback)(({title:e,description:t,variant:r="info",duration:a=3e3})=>{let l=Date.now()+Math.floor(1e3*Math.random());s(s=>[...s,{id:l,title:e,description:t,variant:r}]),window.setTimeout(()=>{s(e=>e.filter(e=>e.id!==l))},a)},[]),c=(0,n.useMemo)(()=>({toast:a}),[a]);return(0,r.jsxs)(i.Provider,{value:c,children:[e,"undefined"!=typeof document&&(0,o.createPortal)(r.jsx("div",{className:"pointer-events-none fixed bottom-4 right-4 flex w-80 flex-col gap-3",children:t.map(e=>(0,r.jsxs)("div",{className:l()("pointer-events-auto rounded-lg border px-4 py-3 shadow-lg transition-all",d[e.variant]),children:[r.jsx("p",{className:"text-sm font-semibold",children:e.title}),e.description?r.jsx("p",{className:"mt-1 text-sm opacity-80",children:e.description}):null]},e.id))}),document.body)]})}function u(){let e=(0,n.useContext)(i);if(!e)throw Error("useToast must be used within a ToastProvider");return e.toast}},9787:(e,t,s)=>{"use strict";s.d(t,{SC:()=>l,WD:()=>i,tD:()=>o});var r=s(1971);class a extends Error{constructor(){super("Unauthorized"),this.name="UnauthorizedError"}}async function l(e,t={}){let s=()=>fetch(e,{...t,credentials:"include",headers:{...t.headers,...t.body?{"Content-Type":"application/json"}:{}}}),l=await s();if(401!==l.status||204===(await fetch("/api/auth/refresh",{method:"POST",credentials:"include"})).status&&401!==(l=await s()).status)return l;throw(0,r.redirect)("/login"),new a}async function n(e,t){let s=await l(e,t),r=await s.text(),a=r?JSON.parse(r):{};if(!s.ok){let e=Error(a?.message??"Request failed");throw e.status=s.status,e}return a}function o(e){let t=new URLSearchParams;e?.genre&&t.set("genre",e.genre),e?.sort&&t.set("sort",e.sort);let s=t.toString();return s?`/api/movies?${s}`:"/api/movies"}async function i(e){return await n("/api/movies",{method:"POST",body:JSON.stringify(e)})}},8662:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(7432),a=s(4738);let l=[{href:"/",label:"Dashboard"},{href:"/movies",label:"Movies"},{href:"/movies/new",label:"Add movie"}];function n({children:e}){return(0,r.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[r.jsx("header",{className:"border-b border-slate-200 bg-white",children:(0,r.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-4 py-4",children:[r.jsx(a.default,{href:"/",className:"text-lg font-semibold text-slate-900",children:"Movies & TV Shows"}),r.jsx("nav",{className:"flex items-center gap-4 text-sm font-medium text-slate-600",children:l.map(e=>r.jsx(a.default,{href:e.href,className:"hover:text-primary",children:e.label},e.href))})]})}),r.jsx("main",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:e})]})}},2835:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(7432),a=s(1109);let l=(0,s(4361).createProxy)(String.raw`C:\Users\Fede\Desktop\proyectos_activos\fullstack-challenge\apps\web\app\(app)\movies\MoviesPageClient.tsx#default`);function n(){return r.jsx(a.Suspense,{fallback:null,children:r.jsx(l,{})})}},7614:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>l});var r=s(7432);s(5158);let a=(0,s(4361).createProxy)(String.raw`C:\Users\Fede\Desktop\proyectos_activos\fullstack-challenge\apps\web\app\providers.tsx#Providers`),l={title:"Movies & TV Shows",description:"Frontend for the Movies & TV Shows API"};function n({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"min-h-screen bg-slate-50 text-slate-900",children:r.jsx(a,{children:e})})})}},5158:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[910,702,680],()=>s(854));module.exports=r})();