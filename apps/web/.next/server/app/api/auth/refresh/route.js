"use strict";(()=>{var e={};e.id=575,e.ids=[575],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},524:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8461:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>x,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>h});var r={};s.r(r),s.d(r,{POST:()=>u});var a=s(7370),n=s(5317),o=s(2579),i=s(6567),p=s(7211);async function u(e){let t=e.cookies.get(p.te.refresh)?.value;if(!t){let e=i.NextResponse.json({success:!1,message:"Missing refresh token",data:null},{status:401});return(0,p.Wx)(e),e}let s=await fetch("http://localhost:3000/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})}),r=await s.text(),a=r?JSON.parse(r):void 0;if(!s.ok||!a?.data?.token){let e=i.NextResponse.json(a??{success:!1,message:"Unable to refresh token",data:null},{status:s.status});return(0,p.Wx)(e),e}let n=new i.NextResponse(null,{status:204});return(0,p.BV)(n,{accessToken:a.data.token}),n}let c=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/refresh/route",pathname:"/api/auth/refresh",filename:"route",bundlePath:"app/api/auth/refresh/route"},resolvedPagePath:"C:\\Users\\Fede\\Desktop\\proyectos_activos\\fullstack-challenge\\apps\\web\\app\\api\\auth\\refresh\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:d}=c,x="/api/auth/refresh/route";function m(){return(0,o.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:h})}},7211:(e,t,s)=>{s.d(t,{BV:()=>o,Wx:()=>i,te:()=>n}),s(719);let r=process.env.AUTH_COOKIE_ACCESS??"mt_access",a=process.env.AUTH_COOKIE_REFRESH??"mt_refresh",n={access:r,refresh:a};function o(e,t,s={}){let{accessToken:n,refreshToken:o}=t;e.cookies.set(r,n,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:s.maxAge??900}),o&&e.cookies.set(a,o,{httpOnly:!0,secure:!0,sameSite:"strict",path:"/",maxAge:604800})}function i(e){e.cookies.set(r,"",{httpOnly:!0,path:"/",maxAge:0}),e.cookies.set(a,"",{httpOnly:!0,path:"/",maxAge:0})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[910,719,145],()=>s(8461));module.exports=r})();